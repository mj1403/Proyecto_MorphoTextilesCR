<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
    <head th:replace="~{layout/plantilla :: head}">
        <meta charset="UTF-8">
            <title>Comentarios del Producto</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
            <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
                </head>

                <body>
                    <header th:replace="~{layout/plantilla :: header}"></header>

                    <div class="container mt-5">
                        <!-- Sección de productos mejor calificados -->
                        <div class="row mb-4">
                            <div class="col-12 text-center">
                                <h3 class="mb-3">Productos con Mayor Calificación</h3>
                                <div class="d-flex justify-content-center">
                                    <img src="/images/producto-destacado.jpg" class="img-fluid" alt="Producto destacado">
                                </div>
                            </div>
                        </div>

                        <!-- Sección de puntuaciones -->
                        <div class="row mb-4 text-center">
                            <div class="col-md-4">
                                <div class="border p-3">
                                    <h5>Puntuación Promedio</h5>
                                    <p class="fs-4">4.5 ★</p>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="border p-3">
                                    <h5>Total de Opiniones</h5>
                                    <p class="fs-4">250 comentarios</p>
                                </div>
                            </div>
                        </div>

                        <!-- Formulario para agregar comentarios -->
                        <div class="comentario-form mb-4">
                            <h3>Deja tu Comentario</h3>
                            <form th:action="@{/comentarios/guardar}" method="post">
                                <input type="hidden" name="producto.idProducto" th:value="${idProducto}">
                                    <div class="mb-3">
                                        <textarea class="form-control" name="comentario" placeholder="Escribe tu comentario aquí" rows="3" required></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Enviar</button>
                            </form>
                        </div>

                        <!-- Lista de comentarios -->
                        <div class="row">
                            <div class="col-12">
                                <h3>Comentarios</h3>
                                <div class="list-group">
                                    <div class="list-group-item" th:each="comentario : ${comentarios}">
                                        <h5 th:text="${comentario.usuario.nombre}" class="mb-1"></h5>
                                        <p th:text="${comentario.comentario}"></p>
                                        <small class="text-muted" th:text="${comentario.fecha}"></small>
                                        <form th:action="@{/comentarios/eliminar/{id}(id=${comentario.idComentario})}" method="post" class="d-inline">
                                            <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <footer th:replace="~{layout/plantilla :: footer}"></footer>
                </body>
                </html>
